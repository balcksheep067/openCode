package photoCollect;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.Random;




public class OpenTest {
	private static final Group Group = null;

	//开包 并返回当前持有的生写
	private ArrayList<Photo> openBag(ArrayList<Photo> nowOwnPhotos) {
		//ArrayList<Photo> bagInfo = new ArrayList<Photo>();
		Group aGroup = new Group();
		Random aRandom = new Random();
		for (int i = 1; i < 6; i++) {
			String tempMember = aGroup.getMEMBER();
			int photoNo = aRandom.nextInt(3);
			Photo aPhoto = new Photo(tempMember,photoNo);
			aPhoto.showPhotoInfo();
			nowOwnPhotos.add(aPhoto);
			//System.out.println("第"+i+"张是："+tempMember+" 的第"+photoNo+"张");	
		}
		return nowOwnPhotos;
	}
	
	//分析 遍历所有的生写，放入模型中
	private void analysePhotos(ArrayList<Photo> nowOwnPhotos,SetModel setModel ) {
		ArrayList<Set> allSetList = setModel.generateMode();//每个成员的set模型  46个
		for (Photo photo : nowOwnPhotos) {
			//取出原有的 放进去
			Set nowMenberSet = setModel.getModeByMember(photo.getMemberName());
			
			for (Set aMemberSet : allSetList) {
				//统计 生写的名字=set 的名字 放入set模型中
				if (photo.getMemberName().equals(aMemberSet.getMember())) {
					nowMenberSet.addPhoto(photo);
				}
			}
		}
		System.out.println(setModel.getMode().size());
	
		
		ArrayList<Set> afterMode = setModel.getMode();
		for (Set set : afterMode) {
			int setOwnNumber = set.getPhotoInfos().size();
			String member = set.getMember();
			int setNumber = set.showSetAmount();
			int leftNumber = setOwnNumber - setNumber*3;
			System.out.println("Amaging!!!!!! "+member+"开出 "+setNumber+" set!"+" 共"+setOwnNumber+"张"+" 剩余"+leftNumber);
			//System.out.println(member+"    "+setOwnNumber);
		}
	}
	
	
	public static void main(String[] args) {
		OpenTest lucky = new OpenTest();
		Group aGroup = new Group();
		SetModel luckyMode = new SetModel(46, "Route246", aGroup);
		ArrayList<Photo> myPhotos = new ArrayList<Photo>();
		for (int i = 1; i < 47; i++) {
			System.out.println("*************************");
			System.out.println("ready???第"+i+"包开始了！GO!");
			lucky.openBag(myPhotos);
			System.out.println("*************************");
			
		}
		lucky.analysePhotos(myPhotos, luckyMode);
		
	}
}
